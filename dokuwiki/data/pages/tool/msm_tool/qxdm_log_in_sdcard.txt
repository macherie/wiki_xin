=====QXDM log存入SD卡并转换成isf格式的流程=====
席芳清  2012-03-29


1， 对SD卡的操作

    手机连上电脑，运行
# adb shell
# mkdir /sdcard/ diag_logs    建立文件夹
# return
然后将DIAG.cfg   push到该目录/sdcard/ diag_logs下：
#adb push  “相应的config文件”  /sdcard/ diag_logs/ DIAG.cfg。
Note: 在SD卡中config文件必须命名为DIAG.cfg。

2，安装高通应用程序

安装程序包如下


警务通手机，打开桌面 “安全设置”— 输入密码1234 – “签名验证设置”—勾选“未知来源”。在终端中输入： # adb install QualcommSettings.apk

3, 运行安装高通应用程序

手机桌面，点击QualcommSettings，选中On-Device Logging，QXDM  log就开始保存在手机中/sdcard/diag_logs.

Note: 由于应用的问题，有时候选取了on-Device Logging，过了一会会变成没有选取，但是其实底层还是在抓QXDM log。如果这个时候想挂掉QXDM log，可以先选取，然后在去掉选择。

5,取出保存的log

手机连接电脑。
# adb shell
# cd sdcard/diag_logs
# ls –l
可以看到除DIAG.cfg外，还有一个目录，按照时间命名的。
# cd 该目录
# ls –l
有如下的文件
-rwxrwxrwx system   sdcard_rw  1013341 2012-01-04 13:12 diag_log_1.qmdl
QXDM  log就保存在这个文件中。
# return
# adb pull /sdcard/diag_logs/ 2012XXXX_XXXX/ diag_log_{num}.qmdl   “本地目录”

6，将SD卡取出的“.qmdl” log转成“.isf”格式

（1） 运行QCAT，File->Open,打开从SD取出的log,比如diag_log_1.qmdl；File->Save,选择菜单“DLF…”，保存，默认命名为“diag_log_1_flt.dlf”。
（2） 运行“DLF Converter”（安装时QXDM已包含DLF Converter），选择刚才生成的“diag_log_1_flt.dlf”，默认保存为“diag_log_1_flt.isf”，这样就可以用QXDM打开查看log了。

7，如何生成.cfg文件（可选， 可以向高通索要cfg文件）

 打开QXDM，按F12，打开“Filtered View”，右击黑色空白处，左击“Config…”，


弹出Item List Config，按照自己的需要的log模块，在左边勾选，并勾选右边Filter/Register On Target For Items，更精确地查找某个模块。

 Item List Config左下方，SD中下拉会出现“Save Diag masks…”保存在本地，命名为DIAG.cfg即可。

