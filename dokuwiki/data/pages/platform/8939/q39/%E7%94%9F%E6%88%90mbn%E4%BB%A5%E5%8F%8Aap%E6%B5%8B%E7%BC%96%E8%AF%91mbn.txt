以Commercial-CMCC-CS-DS.mbn为例修改EFS配置。

1，下载正确的modem_proc文件夹。

2，进入目录modem_proc\mcfg\mcfg_gen\generic\CMCC\

3, 打开MCFG_SW_Items_List_Macro.xlsm。安全提示的时候请选择启用宏。

4，勾选期望生成的mbn。

{{linux:8939:q39:2.png?800|}}
 
5，刚才选中的为Commercial-CMCC-CS-DS，所以sheet”Commercial-CMCC-CS-DS”即为具体配置内容。
 
{{linux:8939:q39:1.png?800|}}

6，修改EFS值：例如我们把T3245 Timer项的值由5改为6,保存后生成新的mbn。

7，新生成的mbn为
\modem_proc\mcfg\configs\mcfg_sw\generic\CMCC\Commercial-CMCC-CS-DS\mcfg_sw.mbn

8， 再生成
\modem_proc\mcfg\configs\mcfg_sw\generic\CMCC\ EPS_Only-CMCC-CS-DS\mcfg_sw.mbn

\modem_proc\mcfg\configs\mcfg_sw\generic\CMCC\Comb_Attach_W_IRAT-CMCC-CS-DS\mcfg_sw.mbn

\modem_proc\mcfg\configs\mcfg_sw\generic\CMCC\ Comb_Attach_TGL-CMCC-CS-DS\mcfg_sw.mbn

　　　　　　　　　　　　　　　　

第二节　重新编译 ap.

1，改名
　　
复制刚才生成的mcfg_sw.mbn到该文件夹后改名为Commercial-CMCC-CS-DS.mbn

替换下面文件夹中的文件比如Commercial-CMCC-CS-DS.mbn

\android\vendor\qcom\proprietary\telephony-apps\ModemTestMode\modemconfig\CMCC\CSFB\DSDS

2, 重新编译 ap， 下载 AP image到手机

3，拨号界面输入*#*#6266344#*#*  或者*#*#mconfig#*#*  

4，激活具体的mbn文件。

拨号界面输入*#*#76266344#*#*  或者*#*#qmconfig#*#* 或者*#1234# 或者运行MBN　Test的APP。进入界面后选择需要的CONFIG后Activate 然后Reboot。
