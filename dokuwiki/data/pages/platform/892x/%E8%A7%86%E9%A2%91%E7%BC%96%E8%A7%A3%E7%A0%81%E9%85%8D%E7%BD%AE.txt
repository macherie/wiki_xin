====== 如何开关硬件编解码 ======

高通默认为使用硬件编解码。而且不能动态切换，也就是一个镜像对应某一种编码要么使用硬件要么使用软件编解码。

===== 1：硬件编解码配置文件 =====


    device/qcom/msm8226/media/media_codecs_8226.xml
    device/qcom/msm8226/media/media_profiles_8226.xml
如过要禁用某个profile的硬件编码可以这这个文件里把他注释掉。


===== 2：通过frameworks中的flag配置 =====

    frameworks/av/include/media/stagefright/OMXCodec.h
    frameworks/av/media/libstagefright/OMXCodec.cpp
    
<code c>
enum CreationFlags
{
    kPreferSoftwareCodecs    = 1,
    kIgnoreCodecSpecificData = 2,
        
    // The client wants to access the output buffer's video
    // data for example for thumbnail extraction.
    kClientNeedsFramebuffer  = 4,
        
    // Request for software or hardware codecs. If request
    // can not be fullfilled, Create() returns NULL.
    kSoftwareCodecsOnly      = 8,
    kHardwareCodecsOnly      = 16, 
        
    // Store meta data in video buffers
    kStoreMetaDataInVideoBuffers = 32, 
        
    // Only submit one input buffer at one time.
    kOnlySubmitOneInputBufferAtOneTime = 64, 
        
    // Enable GRALLOC_USAGE_PROTECTED for output buffers from native window
    kEnableGrallocUsageProtected = 128,
    
    // Secure decoding mode
    kUseSecureInputBuffers = 256,
};

</code>

使用上面的 flag 在 OMXCodec Create 中指定就可以



