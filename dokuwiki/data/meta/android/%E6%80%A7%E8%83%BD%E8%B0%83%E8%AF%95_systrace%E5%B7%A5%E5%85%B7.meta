a:2:{s:7:"current";a:9:{s:4:"date";a:2:{s:7:"created";i:1447753424;s:8:"modified";i:1453361275;}s:7:"creator";s:9:"qiancheng";s:4:"user";s:9:"qiancheng";s:11:"last_change";a:7:{s:4:"date";i:1453361275;s:2:"ip";s:12:"172.21.10.47";s:4:"type";s:1:"E";s:2:"id";s:35:"android:性能调试_systrace工具";s:4:"user";s:9:"qiancheng";s:3:"sum";s:0:"";s:5:"extra";s:0:"";}s:11:"contributor";a:1:{s:9:"qiancheng";s:9:"qiancheng";}s:5:"title";s:31:"性能调试 Performance tuning";s:11:"description";a:2:{s:15:"tableofcontents";a:4:{i:0;a:4:{s:3:"hid";s:31:"性能调试_performance_tuning";s:5:"title";s:31:"性能调试 Performance tuning";s:4:"type";s:2:"ul";s:5:"level";i:1;}i:1;a:4:{s:3:"hid";s:14:"systrace工具";s:5:"title";s:14:"systrace工具";s:4:"type";s:2:"ul";s:5:"level";i:2;}i:2;a:4:{s:3:"hid";s:12:"抓取方法";s:5:"title";s:13:"抓取方法:";s:4:"type";s:2:"ul";s:5:"level";i:2;}i:3;a:4:{s:3:"hid";s:12:"相关文档";s:5:"title";s:15:"相关文档：";s:4:"type";s:2:"ul";s:5:"level";i:2;}}s:8:"abstract";s:559:"性能调试 Performance tuning

systrace工具


位置:
external/chromium-trace/systrace.py


保存下面的代码到ztrace.sh, 在抓取之前先执行下面指令 source ztrace.sh


adb shell setprop service.adb.root 1
adb wait-for-device
adb shell setenforce 0
adb wait-for-device

adb root
adb wait-for-device
adb remount
adb shell "echo 0 > /sys/kernel/debug/tracing/tracing_on"
adb shell "echo > /sys/kernel/debug/tracing/trace"
adb shell "echo 51200 > /sys/kernel/debug/tracing/buffer_size_kb"
adb shell "echo thermal:* > /sys/kernel/debug/tracin…";}s:8:"internal";a:2:{s:5:"cache";b:1;s:3:"toc";b:1;}s:8:"relation";a:1:{s:10:"firstimage";s:0:"";}}s:10:"persistent";a:5:{s:4:"date";a:2:{s:7:"created";i:1447753424;s:8:"modified";i:1453361275;}s:7:"creator";s:9:"qiancheng";s:4:"user";s:9:"qiancheng";s:11:"last_change";a:7:{s:4:"date";i:1453361275;s:2:"ip";s:12:"172.21.10.47";s:4:"type";s:1:"E";s:2:"id";s:35:"android:性能调试_systrace工具";s:4:"user";s:9:"qiancheng";s:3:"sum";s:0:"";s:5:"extra";s:0:"";}s:11:"contributor";a:1:{s:9:"qiancheng";s:9:"qiancheng";}}}