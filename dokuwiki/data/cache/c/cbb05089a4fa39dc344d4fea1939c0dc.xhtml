
<h2 class="sectionedit1" id="性能调试_performance_tuning">性能调试 Performance tuning</h2>
<div class="level2">

</div>
<!-- EDIT1 SECTION "性能调试 Performance tuning" [1-44] -->
<h3 class="sectionedit2" id="systrace工具">systrace工具</h3>
<div class="level3">
<pre class="code">位置:
external/chromium-trace/systrace.py</pre>

<p>
保存下面的代码到ztrace.sh, 在抓取之前先执行下面指令 source ztrace.sh
</p>
<pre class="code">adb shell setprop service.adb.root 1
adb wait-for-device
adb shell setenforce 0
adb wait-for-device

adb root
adb wait-for-device
adb remount
adb shell &quot;echo 0 &gt; /sys/kernel/debug/tracing/tracing_on&quot;
adb shell &quot;echo &gt; /sys/kernel/debug/tracing/trace&quot;
adb shell &quot;echo 51200 &gt; /sys/kernel/debug/tracing/buffer_size_kb&quot;
adb shell &quot;echo thermal:* &gt; /sys/kernel/debug/tracing/set_event&quot;
adb shell &quot;echo msm_low_power:* &gt;&gt; /sys/kernel/debug/tracing/set_event&quot;
adb shell &quot;echo sched:sched_migrate_task &gt;&gt; /sys/kernel/debug/tracing/set_event&quot;
adb shell &quot;echo sched:sched_switch &gt;&gt; /sys/kernel/debug/tracing/set_event&quot;
adb shell &quot;echo sched:sched_wakeup &gt;&gt; /sys/kernel/debug/tracing/set_event&quot;
adb shell &quot;echo sched:sched_cpu_load &gt;&gt; /sys/kernel/debug/tracing/set_event&quot;
adb shell &quot;echo core_ctl_eval_need &gt;&gt; /sys/kernel/debug/tracing/set_event&quot;
adb shell &quot;echo cpufreq_interactive:* &gt;&gt; /d/tracing/set_event&quot;
adb shell &quot;echo kgsl:* &gt;&gt; /d/tracing/set_event&quot;
adb shell &quot;echo mdss:* &gt;&gt; /d/tracing/set_event&quot;
adb shell &quot;echo irq:* &gt;&gt; /sys/kernel/debug/tracing/set_event&quot;
adb shell &quot;cat /sys/kernel/debug/tracing/set_event&quot;</pre>

</div>
<!-- EDIT2 SECTION "systrace工具" [45-1343] -->
<h3 class="sectionedit3" id="抓取方法">抓取方法:</h3>
<div class="level3">

<p>
1. Frame drop issue on browsing, gaming, and UX 丢帧问题，浏览，游戏，和UX
</p>
<pre class="code">$ python systrace.py gfx input view sched am wm dalvik freq idle load sync workq power mmc disk -b 40000 -t 10 -o output.html</pre>

<p>
2. Application launch latency 应用程序启动延迟
</p>
<pre class="code">$ python systrace.py gfx input sched am wm dalvik freq idle load sync workq power mmc disk  -b 40000 -t 10 -o output.html</pre>

<p>
3. Audio quality issue 音频质量问题
</p>
<pre class="code">$ python systrace.py sched dalvik freq idle load sync workq power mmc disk audio hal res -b 40000 -t 10 -o output.html</pre>

<p>
4. Camera frame drop issue 相机帧下降问题
</p>
<pre class="code">$ python systrace.py gfx sched am wm dalvik freq idle load sync workq power mmc disk camera hal res membus -b 40000 -t 10 -o output.html</pre>

<p>
5. Video frame drop issue 视频帧下降问题
</p>
<pre class="code">$ python systrace.py gfx sched am wm dalvik freq idle load sync workq power mmc disk video audio hal res membus –b 40000 –t 10 -o output.htm</pre>

</div>
<!-- EDIT3 SECTION "抓取方法:" [1344-2375] -->
<h3 class="sectionedit4" id="相关文档">相关文档：</h3>
<div class="level3">

<p>
MSM8939/MSM8952/MSM8909性能调试文档<br/>

80-P0584-1_COMMON PERFORMANCE ISSUES DEBUGGING GUIDE
</p>

</div>
<!-- EDIT4 SECTION "相关文档：" [2376-] -->