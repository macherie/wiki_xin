
<p>
 关于用QRCT测试wlan/bt时,在运行QRCT前需要运行进入FTM模式指令:
</p>

<p>
1.wlan需要的命令: adb shell $sh /etc/enable_wcn36xx.sh
</p>

<p>
2.bt需要的命令: adb shell $ftmdaemon
</p>

<p>
然后就可以用QRCT进行测试. 
</p>

<h1 class="sectionedit1" id="记录一些测试方式">记录一些测试方式</h1>
<div class="level1">
<pre class="code">BT test:

adb remount

adb push btconfig /system/xbin/

adb shell chmod 777 /system/xbin/btconfig

adb push init.qcom8x26.btcta.sh /etc

sh /etc/init.qcom8x26.btcta.sh</pre>

<p>
WIFI test:
</p>
<pre class="code">adb remount
adb push iwpriv /system/xbin/
adb shell chmod 777 /system/xbin/iwpriv
insmod /system/lib/modules/wlan.ko con_mode=5
ptt_socket_app -f
iwpriv wlan0 ftm 1 //start ftm 
(和脚本enable_wcn36xx.sh是一样的)

for tx test 

iwpriv wlan0 set_channel 1 //select channel 
iwpriv wlan0 ena_chain 2 // 2 test tx, 1 test rx 
iwpriv wlan0 pwr_cntl_mode 1 //1: SCPC; 2: CLPC 
iwpriv wlan0 set_txpower 10 
iwpriv wlan0 set_txrate 11B_LONG_11_MBPS 
iwpriv wlan0 tx 1 


for rx test: 
iwpriv wlan0 set_channel 1 
iwpriv wlan0 rx 0 
iwpriv wlan0 ena_chain 1 // 2 test tx, 1 test rx 
iwpriv wlan0 clr_rxpktcnt 1 /*clear RX packet count*/ 
iwpriv wlan0 rx 1 /* enable RX to receive 11b/g/n packets*/ 

iwpriv wlan0 get_rxpktcn 

iwpriv wlan0 ftm 0 //stop ftm </pre>

</div>
<!-- EDIT1 SECTION "记录一些测试方式" [227-1234] -->
<h1 class="sectionedit2" id="高通android平台蓝牙射频测试的启动步骤">高通Android平台蓝牙射频测试的启动步骤</h1>
<div class="level1">

<p>
参考文档 - 80-WL300-16 BLUETOOTH TEST FOR ANDROID SYSTEM
信令模式
− 使用QRCT
• 从界面关闭蓝牙
</p>
<pre class="code">• #adb root
#adb shell
#ftmdameon
• 启动QRCT -&gt; BT HCI COMMANDS(Click &quot;Disable Legacy support&quot;)
-&gt;HCI Reset-&gt;DUT MODE-&gt;Inquiry page scan
-&gt;auto accept on role switch enable
− 使用btconfig
• #adb shell
btconfig /dev/smd3 reset
btconfig /dev/smd3 rawcmd 0x06, 0x03
btconfig /dev/smd3 rawcmd 0x03, 0x05, 0x02, 0x00, 0x02
btconfig /dev/smd3 rawcmd 0x03, 0x1A, 0x03
btconfig /dev/smd3 rawcmd 0x03, 0x20, 0x00
btconfig /dev/smd3 rawcmd 0x03, 0x22, 0x00</pre>

<p>
高通Android平台蓝牙射频测试的启动步骤(续)
非信令模式
− 使用QRCT
• 从界面关闭蓝牙
</p>
<pre class="code">• #adb root
#adb shell
#ftmdameon
• 启动QRCT -&gt; FTM Command -&gt; BT -&gt; EPTM
-&gt; Select Bluetooth Chip “QCA6174/WCN2243/36xx”
− 使用btconfig
• i.e TX_Continous
btconfig /dev/smd3 rawcmd 0x3F 0x04 0x05 0x00 0x09 0x05 0x20 0x00 0x00 0x00 0x00
0x3F – OGF, 0x04 – OCF, 0x05 – Subcommand (continuous transmit)
0x00 – TX channel 0, range: 0x00-0x4F
0x09 – TX power level, range: 0-9
0x05 – TX pattern type
04 1-Carrier 05 1-PRBS9 (GFSK) 06 1-PRBS15 (GFSK) 07 1-Pattern (GFSK)
08 2-PRBS9 (Pi/4DQPSK) 09 2-PRBS15 (Pi/4DQPSK) 0A 2-Pattern (Pi/4DQPSK)
0B 3-PRBS9 (8DPSK)
0C 3-PRBS15 (8DPSK)
0D 3-Pattern (8DPSK)
0x20 – TX pattern length, range: 0x01-0x20
0x00 0x00 0x00 0x00 – TX pattern</pre>

<p>
高通Android平台蓝牙射频测试的启动步骤(续)
BLE Direct Test Mode
− Tester
• Install QPST and DUT driver
• Configure HCI command output COM port as NMEA port. Flow control is
none and baud rate is 115200.
− DUT
• 从界面关闭蓝牙
</p>
<pre class="code">• #adb root
#adb shell
#wdsdameon
− NOTE
RF test program can only support COM1 - COM8. If NMEA port number is out of that
range, you need to manually adjust the number. The step to do that is:
• Launch device manager
• Right click on NMEA port and select Properties
• Select Port Settings
• Click on Advanced
• Change COM port number</pre>

</div>
<!-- EDIT2 SECTION "高通Android平台蓝牙射频测试的启动步骤" [1235-] -->