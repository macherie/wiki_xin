
<h1 class="sectionedit1" id="分析内核的ramdump">分析内核的ramdump</h1>
<div class="level1">

<p>
执行命令前先配置工程source build/envsetup.sh,然后lunch相应的项目，否则出现如下错误：
</p>
<pre class="code">Could not find platform independent libraries &lt;prefix&gt; Could not find platform dependent libraries &lt;exec_prefix&gt; Consider setting $PYTHONHOME to 
&lt;prefix&gt;[:&lt;exec_prefix&gt;] ImportError: No module named site

python ramparse.py –everything --64-bit -g &lt;path_to_gdb&gt; -n &lt;path_to_nm&gt; –vmlinux &lt;path_to_vmlinux&gt; –auto-dump &lt;path_to_ramdump&gt; -o &lt;path_to_output&gt; 

python ramparse.py --everything  --64-bit -g ~/mount_work/Q39_5.0/prebuilts/gcc/linux-x86/aarch64/aarch64-linux-android-4.8/bin/
aarch64-linux-android-gdb -n ~/mount_work/Q39_5.0/prebuilts/gcc/linux-x86/aarch64/aarch64-linux-android-4.8/bin/aarch64-linux-android-nm  
--vmlinux ~/mount_work/Q39_5.0/out/target/product/q39/obj/KERNEL_OBJ/vmlinux --auto-dump ~/crash_ramdump/q39/Port_COM46/  
-o ~/crash_ramdump/q39/Port_COM46/out/</pre>

<p>
<a href="/dokuwiki/lib/exe/fetch.php?media=linux:8939:linux-ramdump-parser-v2-64-8939.tar.gz" class="media mediafile mf_gz" title="linux:8939:linux-ramdump-parser-v2-64-8939.tar.gz (149.9 KB)">linux-ramdump-parser-v2-64-8939.tar.gz</a>
</p>
<pre class="code">例：
[ 1175.857430] Internal error: Oops: 96000007 [#1] PREEMPT SMP
[ 1175.857434] Modules linked in:
[ 1175.857440] CPU: 4 PID: 0 Comm: swapper/4 Not tainted 3.10.49-g96b71a3-00002-g6876be1 #1
[ 1175.857444] task: ffffffc00c3e35c0 ti: ffffffc070d78000 task.ti: ffffffc070d78000
[ 1175.857454] PC is at lifo_stats_file_show+0x30/0xa8
[ 1175.857458] LR is at lpm_stats_cpu_exit+0x80/0x9c
[ 1175.857461] pc : [&lt;ffffffc00082a908&gt;] lr : [&lt;ffffffc00082ad30&gt;] pstate: 200001c5
[ 1175.857463] sp : ffffffc070d7be20
[ 1175.857468] x29: ffffffc070d7be20 x28: 0000000000000001

全部dump
aarch64-linux-android-objdump  -Dz -S vmlinux &gt; vm.txt
按行分析：
aarch64-linux-android-addr2line -a ffffffc00082a908 -e vmlinux
0xffffffc00082a908
/home/jenkins/jobs/S201-Release/workspace/kernel/include/linux/list.h:188

aarch64-linux-android-addr2line -a ffffffc070d7bd20 -e vmlinux
0xffffffc070d7bd20
??:0</pre>

</div>
