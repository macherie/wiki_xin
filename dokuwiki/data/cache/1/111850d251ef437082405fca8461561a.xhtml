
<h1 class="sectionedit1" id="在gerrit新建库">1.在gerrit新建库</h1>
<div class="level1">

<p>
 <strong><span style='color:red; '>此功能只有管理员才可操作。若已存在库，可直接操作无需创建</span></strong>
</p>

</div>
<!-- EDIT1 SECTION "1.在gerrit新建库" [1-146] -->
<h1 class="sectionedit2" id="方法一">方法一</h1>
<div class="level1">

</div>
<!-- EDIT2 SECTION "方法一" [147-170] -->
<h2 class="sectionedit3" id="新建git库">1.新建git库</h2>
<div class="level2">

<p>
git 用户进入服务器，在/home/git/repositories/目录下，新建自己需要的库，也可新建多目录的库<br/>

</p>

<p>
git init –bare xxx xxx为新建库的名称 <br/>

</p>

<p>
比如 git init –bare art 新建art库 <br/>

git init –bare package/art  在package/目录下新建art库 <br/>

</p>

</div>
<!-- EDIT3 SECTION "1.新建git库" [171-483] -->
<h3 class="sectionedit4" id="关联gerrit">关联gerrit</h3>
<div class="level3">

<p>
切换到gerrit用户，在/home/gerrit2/review_site/git/目录下。
</p>

<p>
ln -s /home/git/repositories/xxx 就关联上了。
</p>

</div>
<!-- EDIT4 SECTION "关联gerrit" [484-630] -->
<h1 class="sectionedit5" id="方法二">方法二</h1>
<div class="level1">

</div>
<!-- EDIT5 SECTION "方法二" [631-654] -->
<h3 class="sectionedit6" id="下载gitolite-admin">下载gitolite-admin</h3>
<div class="level3">

<p>
若本地没有可以下方式下载
</p>
<pre class="code">git clone git@192.167.100.232:gitolite-admin.git</pre>

</div>
<!-- EDIT6 SECTION "下载gitolite-admin" [655-784] -->
<h3 class="sectionedit7" id="添加库">添加库</h3>
<div class="level3">

<p>
<strong>1.  vim conf/gitolite.conf</strong> <br/>

</p>

<p>
<strong>2. 例如添加新的库platform/frameworks/opt/bluetooth<span style='color:red; '>(新建库的名称)</span></strong>
</p>
<pre class="code">repo    platform/frameworks/opt/bluetooth
               R       =   @all
               RW+     =   gerrit2</pre>

<p>
<strong>3.提交</strong> <br/>

 git add -m “XXXX”  <br/>

 git push <br/>

如此之后在gerrit服务器上将创建一个platform/frameworks/opt/bluetooth库
</p>

</div>
<!-- EDIT7 SECTION "添加库" [785-1205] -->
<h3 class="sectionedit8" id="本地代码推送到gerrit服务器">本地代码推送到gerrit服务器</h3>
<div class="level3">

<p>
<strong>1.代码路径</strong> <br/>

cd frameworks/opt/bluetooth <br/>

</p>

<p>
<strong>2. 创建本地</strong> <br/>

git init 初始化库<br/>

git add -A 添加所有<br/>

git commit -m “XXXX”<br/>

</p>

<p>
<strong>3.推送到服务器</strong>  <br/>

git push ssh:<em>kun.mao@192.167.100.232:29418/platform/frameworks/opt/bluetooth HEAD:refs/heads/<span style='color:red; '>服务器上分支名(一般以平台或项目命名，如8939_L，Q39_L)</span>  <br/>


<strong>4.repo管理</strong> <br/>

可参考以往项目创建.repo/manifests目录，并新建default.xml。<br/>

&lt;?xml version=“1.0” encoding=“UTF-8”?&gt;<br/>

&lt;manifest&gt;<br/>

  &lt;remote fetch=“git@192.167.100.232:/” name=“sim” review=“<a href="http://192.167.100.232:8080" class="urlextern" title="http://192.167.100.232:8080"  rel="nofollow">http://192.167.100.232:8080</a>”/&gt;<br/>

  &lt;default remote=“sim” revision=“<span style='color:red; '>服务器上分支名</span>”/&gt;<br/>

  &lt;project name=“platform/frameworks/opt/bluetooth” path=“frameworks/opt/bluetooth”/&gt;<br/>

&lt;/manifest&gt;


               
</p>

</div>
<!-- EDIT8 SECTION "本地代码推送到gerrit服务器" [1206-] -->