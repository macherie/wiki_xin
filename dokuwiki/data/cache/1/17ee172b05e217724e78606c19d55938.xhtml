
<h1 class="sectionedit1" id="安装gitolite">安装gitolite</h1>
<div class="level1">

</div>
<!-- EDIT1 SECTION "安装gitolite" [1-28] -->
<h2 class="sectionedit2" id="创建专用账号">1. 创建专用账号</h2>
<div class="level2">

<p>
安装 Gitolite，首先要在服务器端创建专用帐号，所有用户都通过此帐号访问 Git 库。一般为方便易记，选择 git 作为专用帐号名称。
</p>
<pre class="code">$ sudo adduser --system --shell /bin/bash --group git</pre>

<p>
创建用户 git，并设置用户的 shell 为可登录的 shell，如 /bin/bash，同时添加同名的用户组。
</p>

<p>
有的系统，只允许特定的用户组（如 ssh 用户组）的用户才可以通过 SSH 协议登录，这就需要将新建的 git 用户添加到 ssh 用户组中。
</p>
<pre class="code">$ sudo adduser git ssh</pre>

<p>
为 git 用户设置口令。当整个 git 服务配置完成，运行正常后，建议取消 git 的口令，只允许公钥认证。
</p>
<pre class="code">$ sudo passwd git</pre>

</div>
<!-- EDIT2 SECTION "1. 创建专用账号" [29-804] -->
<h2 class="sectionedit3" id="添加权限以便gitweb能够读取版本库的内容_可选">2. 添加权限以便gitweb能够读取版本库的内容：（可选）</h2>
<div class="level2">
<pre class="code">$ sudo usermod -a -G git www-data</pre>

</div>
<!-- EDIT3 SECTION "2. 添加权限以便gitweb能够读取版本库的内容：（可选）" [805-937] -->
<h2 class="sectionedit4" id="将管理员公钥复制到服务器上">3. 将管理员公钥复制到服务器上</h2>
<div class="level2">
<pre class="code">$ scp ~/.ssh/id_rsa.pub server@ip:/tmp/admin.pub</pre>

</div>
<!-- EDIT4 SECTION "3. 将管理员公钥复制到服务器上" [938-1055] -->
<h2 class="sectionedit5" id="安装gitolite1">4. 安装gitolite</h2>
<div class="level2">
<pre class="code">sudo apt-get -y install gitolite</pre>

</div>
<!-- EDIT5 SECTION "4. 安装gitolite" [1056-1132] -->
<h2 class="sectionedit6" id="执行gitolite安装">5. 执行gitolite安装</h2>
<div class="level2">
<pre class="code">gl-setup /tmp/admin.pub</pre>

</div>
<!-- EDIT6 SECTION "5. 执行gitolite安装" [1133-1206] -->
<h2 class="sectionedit7" id="安装过程中会询问你是否修改配置文件_home_git_gitoliterc">6. 安装过程中会询问你是否修改配置文件（/home/git/.gitolite.rc）</h2>
<div class="level2">

<p>
修改如下：
</p>
<pre class="code">REPO_UMASK=0007;
版本库创建使用的掩码。即新建立的版本库的权限为&#039;rwxrwx---&#039;。
$GL_WILDREPOS=1；
默认支持通配符版本库授权。</pre>

</div>
<!-- EDIT7 SECTION "6. 安装过程中会询问你是否修改配置文件（/home/git/.gitolite.rc）" [1207-1491] -->
<h2 class="sectionedit8" id="退出git账户">7. 退出git账户</h2>
<div class="level2">

</div>
<!-- EDIT8 SECTION "7. 退出git账户" [1492-] -->