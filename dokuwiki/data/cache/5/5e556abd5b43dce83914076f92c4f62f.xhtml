
<h2 class="sectionedit1" id="性能调试_performance_tuning">性能调试 Performance tuning</h2>
<div class="level2">

<p>
systrace工具
</p>
<pre class="code">external/chromium-trace/systrace.py

adb shell setprop service.adb.root 1
adb wait-for-device
adb shell setenforce 0
adb wait-for-device

adb root
adb wait-for-device
adb remount
adb shell &quot;echo 0 &gt; /sys/kernel/debug/tracing/tracing_on&quot;
adb shell &quot;echo &gt; /sys/kernel/debug/tracing/trace&quot;
adb shell &quot;echo 51200 &gt; /sys/kernel/debug/tracing/buffer_size_kb&quot;
adb shell &quot;echo thermal:* &gt; /sys/kernel/debug/tracing/set_event&quot;
adb shell &quot;echo msm_low_power:* &gt;&gt; /sys/kernel/debug/tracing/set_event&quot;
adb shell &quot;echo sched:sched_migrate_task &gt;&gt; /sys/kernel/debug/tracing/set_event&quot;
adb shell &quot;echo sched:sched_switch &gt;&gt; /sys/kernel/debug/tracing/set_event&quot;
adb shell &quot;echo sched:sched_wakeup &gt;&gt; /sys/kernel/debug/tracing/set_event&quot;
adb shell &quot;echo sched:sched_cpu_load &gt;&gt; /sys/kernel/debug/tracing/set_event&quot;
adb shell &quot;echo core_ctl_eval_need &gt;&gt; /sys/kernel/debug/tracing/set_event&quot;
adb shell &quot;echo cpufreq_interactive:* &gt;&gt; /d/tracing/set_event&quot;
adb shell &quot;echo kgsl:* &gt;&gt; /d/tracing/set_event&quot;
adb shell &quot;echo mdss:* &gt;&gt; /d/tracing/set_event&quot;
adb shell &quot;echo irq:* &gt;&gt; /sys/kernel/debug/tracing/set_event&quot;
adb shell &quot;cat /sys/kernel/debug/tracing/set_event&quot;


Frame drop issue on browsing, gaming, and UX 丢帧问题，浏览，游戏，和UX
$ python systrace.py gfx input view sched am wm dalvik freq idle load sync workq power mmc disk -b 40000 -t 10 -o output.html

Application launch latency 应用程序启动延迟
$ python systrace.py gfx input sched am wm dalvik freq idle load sync workq power mmc disk  -b 40000 -t 10 -o output.html

Audio quality issue 音频质量问题
$ python systrace.py sched dalvik freq idle load sync workq power mmc disk audio hal res -b 40000 -t 10 -o output.html

Camera frame drop issue 相机帧下降问题
$ python systrace.py gfx sched am wm dalvik freq idle load sync workq power mmc disk camera hal res membus -b 40000 -t 10 -o output.html

Video frame drop issue 视频帧下降问题
$ python systrace.py gfx sched am wm dalvik freq idle load sync workq power mmc disk video audio hal res membus –b 40000 –t 10 -o output.htm</pre>

</div>
